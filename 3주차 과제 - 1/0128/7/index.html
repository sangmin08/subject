<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<input type="text" placeholder="분 입력">
<button class="set">설정</button>
<p class="title">타이머</p>
<h1 class="timer">00:00</h1>
<button class="reset">재설정</button>
<button class="start">시작</button>
<body>
    <script>
        const title = document.querySelector(".title")
        const reset = document.querySelector(".reset")
        const start = document.querySelector(".start")
        const input = document.querySelector("input")
        const set = document.querySelector(".set")

        let time = 0;
        let isRunning = false
        let intervalId = null

        start.addEventListener("click",()=>{
            if(!isRunning) {
                startTimer()
            } else {
                pauseTimer()
            }
        })

        set.addEventListener("click",setupTimer)

        function setupTimer() {
            if (isNaN(input.value)) return
            const minutes = Number(input.value);

            pauseTimer();
            time = minutes * 60;
            
            title.textContent = `${input.value}분타이머`
            update()
        }

        reset.addEventListener("click",resetTimer)
          
        function resetTimer() {
            
            setupTimer()
        }
        
        function startTimer() {
            if (intervalId) return;

            isRunning = true
            start.textContent = "중지"

            intervalId = setInterval(onInterval, 1000)
        }
        
        function pauseTimer() {
            isRunning = false
            start.textContent = "시작"
            clearInterval(intervalId)
            intervalId = null
        }
        
        function onInterval() {
            time -= 1;
            
            if (time <= 0){
                pauseTimer()
                time = 0
            }
            update()
        }
        
        function update() {
            const minute = Math.floor(time / 60);
            const second = time % 60
            
            document.querySelector(".timer").textContent = `${minute}:${second}`   
        }
    </script>
</body>

</html>